# 画面遷移

本アプリケーションの主要な画面遷移は以下の通りです。矢印（→）はユーザーのアクションやシステムの自動的な遷移を示します。

1.  （起動）→ ゲーム作成画面
    *   ユーザーがサイトにアクセスした最初の画面。

2.  ゲーム作成画面
    *   【機能】: プレイヤー名とルーム設定（後述）を入力し、新規ルームを作成する。
    *   【アクション】: プレイヤー名を入力し、「ルームを作成」ボタンを押す。
    *   → **ゲーム待機画面（ロビー）** へ遷移。自身がホストとなる。

3.  （招待URLにアクセス）→ ゲーム参加画面
    *   既存ルームのURL（例: `https://example.com/room/ABCD`）にアクセスした状態。
    *   【機能】: プレイヤー名を入力し、既存ルームに参加する。
    *   【アクション】: プレイヤー名を入力し、「ルームに参加」ボタンを押す。
    *   → **ゲーム待機画面（ロビー）** へ遷移。
    *   ※ゲームが既に開始している場合は、参加できずにエラーメッセージを表示する。

4.  ゲーム待機画面（ロビー）
    *   【アクション】: ホストが「ゲームを開始」ボタンを押す。
    *   → **お題入力画面** へ遷移。

5.  お題入力画面
    *   【アクション】: 親が「お題」を入力し、「決定」ボタンを押す。
    *   → **意味入力画面** へ遷移。

6.  意味入力画面
    *   【イベント】: 全員が「意味」の入力を完了する。
        *   親は「本当の意味」と、任意で「参考URL」を入力する
        *   子は「偽の意味」を入力する
    *   → **投票画面** へ自動的に遷移。

7.  投票画面
    *   【イベント】: 全員（子）が投票を完了する。
    *   → **結果発表画面** へ自動的に遷移。

8.  結果発表画面
    *   【判定】: まだ全員が親を経験していない場合
        *   【アクション】: 「次のラウンドへ」ボタンを押す。
        *   → **お題入力画面** へ遷移。（次の親が選ばれる）
    *   【判定】: 全員が親を経験した場合
        *   【アクション】: 「最終結果へ」ボタンを押す。
        *   → **最終結果画面** へ遷移。

9.  最終結果画面
    *   【アクション】: 「ゲーム作成画面に戻る」ボタンを押す。
    *   → **ゲーム作成画面** へ遷移。

## 画面レイアウト（ワイヤーフレーム）

各画面は、基本的に以下の共通構造を基本とします。

**ゲーム開始前（ロビーまで）の構造:**
1.  ヘッダー: アプリケーションのタイトルや、ルームIDなど。
2.  説明: その画面の役割や、ユーザーへの案内テキスト。
3.  画面固有コンポーネント: 入力欄、ボタン、リストなど。

**ゲーム中（お題入力以降）の構造:**
1.  ヘッダー: ルームID、現在のラウンド、親プレイヤーなど。
2.  説明: その画面の役割や、ユーザーへの案内テキスト。
3.  画面固有コンポーネント: 入力欄、ボタン、選択肢など。
4.  プレイヤー一覧: 全プレイヤーの名前と現在の点数を表示。
5.  ゲームログ: ゲームの進行状況を示すログ。

### ゲーム作成画面

```
------------------------------------
|             たほいや             |
|----------------------------------|
|  [ 説明 ]                        |
|  Web版たほいやへようこそ！       |
|  プレイヤー名を入力して、新しいルームを作成してください。|
|----------------------------------|
|  [ プレイヤー名入力 ]            |
|  ______________________________  |
| |                              | |
| |______________________________| |
|                                  |
|  [ ルーム作成ボタン ]            |
|  ______________________________  |
| |          ルームを作成          | |
| |______________________________| |
|__________________________________|
```

### ゲーム参加画面

```
------------------------------------
|             たほいや             |
|----------------------------------|
|  [ ヘッダー: ルーム情報 ]        |
|  ルームID: ABCD に参加します。    |
|----------------------------------|
|  [ 説明 ]                        |
|  プレイヤー名を入力して、ルームに参加してください。|
|----------------------------------|
|  [ プレイヤー名入力 ]            |
|  ______________________________  |
| |                              | |
| |______________________________| |
|                                  |
|  [ ルームに参加ボタン ]          |
|  ______________________________  |
| |          ルームに参加          | |
| |______________________________| |
|__________________________________|
```

### ゲーム待機画面（ロビー）

```
------------------------------------
|             たほいや             |
|----------------------------------|
|  [ ヘッダー: ルーム情報 ]        |
|  ルームID: ABCD [URLコピーボタン]  |
|----------------------------------|
|  [ 説明 ]                        |
|  現在 3 人が参加しています。      |
|  ホストがゲームを開始するまでお待ちください。|
|----------------------------------|
|  [ ホスト専用アクション ]        |
|  ______________________________  |
| |          ゲームを開始          | |
| |______________________________| |
|                                  |
|  [ 参加者一覧 ]                  |
|  ------------------------------  |
| | プレイヤーA (ホスト)         | |
| | プレイヤーB                  | |
| | プレイヤーC                  | |
| |______________________________| |
|__________________________________|
```

### お題入力画面

```
------------------------------------
|             たほいや             |
|----------------------------------|
|  [ ヘッダー: ルーム情報 ]        |
|  ラウンド1 / 親: プレイヤーA     |
|----------------------------------|
|  [ 説明 ]                        |
|  (親向け): お題と本当の意味を入力してください。|
|  (子向け): 親がお題を入力中です。     |
|----------------------------------|
|  [ 画面固有コンポーネント ]      |
|  (親向け):                       |
|    [ お題（単語）] [決定ボタン]   |
|  (子向け):                       |
|    親がお題を入力しています...      |
|----------------------------------|
|  [ プレイヤー一覧 ]              |
|  ------------------------------  |
| | プレイヤーA (親) [10点]        | |
| | プレイヤーB      [10点]        | |
| | プレイヤーC      [10点]        | |
| |______________________________| |
|----------------------------------|
|  [ ゲームログ ]                  |
|  ------------------------------  |
| | プレイヤーAが親になりました。  | |
| |______________________________| |
|__________________________________|
```

### 意味入力画面

```
------------------------------------
|             たほいや             |
|----------------------------------|
|  [ ヘッダー: ルーム情報 ]        |
|  ラウンド1 / 親: プレイヤーA     |
|----------------------------------|
|  [ 説明 ]                        |
|  親が入力したお題に対する「もっともらしい偽の意味」を|
|  テキストボックスに入力し、送信ボタンを押してください。|
|----------------------------------|
|  [ 画面固有コンポーネント ]      |
|  [ お題 ]                        |
|  ______________________________  |
| | 辞書に載っている珍しい単語  | |
| |______________________________| |
|                                  |
|  (親向け):                       |
|  [ 本当の意味 ]                   |
|  ______________________________  |
| | 本当の意味を入力してください   | |
| |______________________________| |
|  [ 参考URL ]                     |
|  ______________________________  |
| | 参考URLを入力してください   | |
| |______________________________| |
|                                  |
|  (子向け):                       |
|  [ 偽の意味 ]                    |
|  ______________________________  |
| | 偽の意味を入力してください   | |
| |______________________________| |
|                                  |
|  [ 送信ボタン ]                  |
|  ______________________________  |
| |            送信              | |
| |______________________________| |
|                                  |
|----------------------------------|
|  [ プレイヤー一覧 ]              |
|  ------------------------------  |
| | プレイヤーA (親) [10点]        | |
| | プレイヤーB      [10点]        | |
| | プレイヤーC      [10点]        | |
| |______________________________| |
|----------------------------------|
|  [ ゲームログ ]                  |
|  ------------------------------  |
| | プレイヤーAがお題を入力しました。| |
| |______________________________| |
|__________________________________|
```

### 投票画面

```
------------------------------------
|             たほいや             |
|----------------------------------|
|  [ ヘッダー: ルーム情報 ]        |
|  ラウンド1 / 親: プレイヤーA     |
|----------------------------------|
|  [ 説明 ]                        |
|  (子向け): 「本当の意味」だと思うものを1つ選び、|
|  賭ける点数を選択して投票してください。|
|  (親向け): 子の投票が終わるまでお待ちください。|
|----------------------------------|
|  [ 画面固有コンポーネント ]      |
|  [ お題 ]                        |
|  ______________________________  |
| | 辞書に載っている珍しい単語  | |
| |______________________________| |
|                                  |
|  (子向け):                       |
|  [ 選択肢一覧 ]                  |
|  ------------------------------  |
| | ( ) 1. これは偽の意味その1   | |
| | ( ) 2. これは本当の意味      | |
| | ( ) 3. これも偽の意味その2   | |
| |______________________________| |
|                                  |
|  [ ベット点数 ]                  |
|  (1点) (2点) (3点)               |
|                                  |
|  [ 投票ボタン ]                  |
|  ______________________________  |
| |            投票              | |
| |______________________________| |
|                                  |
|  (親向け):                       |
|  子が投票しています...            |
|  (全〇人中 △人が投票済み)          |
|----------------------------------|
|  [ プレイヤー一覧 ]              |
|  ------------------------------  |
| | プレイヤーA (親) [10点]        | |
| | プレイヤーB      [10点]        | |
| | プレイヤーC      [10点]        | |
| |______________________________| |
|----------------------------------|
|  [ ゲームログ ]                  |
|  ------------------------------  |
| | 全員が意味の入力を完了しました。 | |
| |______________________________| |
|__________________________________|
```

### 結果発表画面

```
------------------------------------
|             たほいや             |
|----------------------------------|
|  [ ヘッダー: ルーム情報 ]        |
|  ラウンド1 / 親: プレイヤーA     |
|----------------------------------|
|  [ 説明 ]                        |
|  今回のラウンドの結果発表です！    |
|----------------------------------|
|  [ 画面固有コンポーネント ]      |
|  [ お題 ]                        |
|  ______________________________  |
| | 辞書に載っている珍しい単語  | |
| |______________________________| |
|                                  |
|  [ 正解発表エリア ]              |
|  ------------------------------  |
| | 【本当の意味】                   | |
| |   これは本当の意味です。(作者:親A)| |
| |______________________________| |
|                                  |
|  [ 偽の意味発表エリア ]          |
|  ------------------------------  |
| | 【偽の意味】1. これは偽の意味その1 (作者:子B) | |
| |   投票数: 1 (-1点)               | |
| | 【偽の意味】2. これも偽の意味 (作者:子C) | |
| |   投票数: 0                      | |
| |______________________________| |
|                                  |
|  [ 各プレイヤーの投票結果 ]      |
|  ------------------------------  |
| | プレイヤーB: 「本当の意味」に2点ベット (正解！) | |
| | プレイヤーC: 「偽の意味その1」に1点ベット (不正解！) | |
| |______________________________| |
|                                  |
|  [ アクションボタン ]            |
|  ______________________________  |
| |       次のラウンドへ         | |
| |______________________________| |
|  ______________________________  |
| |          ゲーム終了          | |
| |______________________________| |
|----------------------------------|
|  [ プレイヤー一覧 ]              |
|  ------------------------------  |
| | プレイヤーA (親) [10点 → 11点]| |
| | プレイヤーB      [10点 → 12点]| |
| | プレイヤーC      [10点 → 8点] | |
| |______________________________| |
|----------------------------------|
|  [ ゲームログ ]                  |
|  ------------------------------  |
| | 全員が投票を完了しました。      | |
| |______________________________| |
|__________________________________|
```

### 最終結果画面

```
------------------------------------
|             たほいや             |
|----------------------------------|
|  [ ヘッダー: ルーム情報 ]        |
|  ゲーム終了                      |
|----------------------------------|
|  [ 説明 ]                        |
|  ゲームが終了しました！最終結果です。|
|----------------------------------|
|  [ 画面固有コンポーネント ]      |
|  [ 最終結果一覧 ]                |
|  ------------------------------  |
| | 1位: プレイヤーB [30点] (WINNER!)| |
| | 2位: プレイヤーA [25点]        | |
| | 3位: プレイヤーC [15点]        | |
| |______________________________| |
|                                  |
|  [ アクションボタン ]            |
|  ______________________________  |
| |      ゲーム作成画面に戻る      | |
| |______________________________| |
|----------------------------------|
|  [ プレイヤー一覧 ]              |
|  ------------------------------  |
| | プレイヤーA [25点]             | |
| | プレイヤーB [30点]             | |
| | プレイヤーC [15点]             | |
| |______________________________| |
|----------------------------------|
|  [ ゲームログ ]                  |
|  ------------------------------  |
| | 全てのラウンドが終了しました。 | |
| |______________________________| |
|__________________________________|
```